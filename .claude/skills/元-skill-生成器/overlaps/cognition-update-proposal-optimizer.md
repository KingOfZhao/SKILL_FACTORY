# 认知更新提案（skill-generator 自我精炼）

## 生成时间
2026-02-26

## 本次生成对象
**skill-优化器** (Skill-Optimizer)

---

## 新增结构化认知

### 1. 元认知模式

| 模式名称 | 描述 | 适用场景 |
|---------|------|---------|
| 历史驱动优化 | 基于修复结果分析模式，生成优化方案 | 优化类、增强类 Skill |
| 拓展增强双轨制 | 同时拓展同类型 skill 和增强上游工具 | 跨类型协作优化 |
| 分析推荐生成评估 | 四步标准流程确保优化质量 | 复杂优化场景 |

### 2. 拓展类型映射（可复用）

```yaml
问题类别映射:
  structure:
    - validator  # 验证器
    - formatter  # 格式化器
  syntax:
    - formatter  # 格式化器
  convention:
    - compliance  # 合规检查器
  tools:
    - dependency  # 依赖分析器
```

### 3. 拓展类型体系（可复用）

完整的 skill 生态拓展类型：

| 类型 | 职责 | 输出 |
|-----|------|------|
| **validator** | 验证配置合规性 | 验证报告、问题列表 |
| **formatter** | 自动格式化 | 格式化差异、修改列表 |
| **compliance** | 检查约定遵守 | 合规报告、整改建议 |
| **dependency** | 分析依赖关系 | 依赖列表、使用统计 |
| **profiler** | 分析执行性能 | 性能报告、优化建议 |
| **doc-gen** | 生成文档 | 文档文件、目录结构 |
| **test-gen** | 生成测试用例 | 测试文件、测试模板 |

### 4. 输出模式

优化类 Skill 的标准输出结构：

```
output/
├── analysis.json          # 结构化分析结果
├── extension-plans/       # 拓展方案集合
│   ├── validator.md
│   ├── formatter.md
│   └── ...
├── fixer-enhancement.md  # 上游增强方案
└── optimization-report.md # 优化效果评估
```

### 5. 增强维度模式

工具增强的四个维度：

```yaml
增强维度:
  检测维度:
    - 基于问题频次新增
    - 代码质量检查
    - 安全性检查
    - 国际化检查

  修复逻辑:
    - 智能修复推荐
    - 上下文感知
    - 冲突解决

  输出格式:
    - 增强 JSON 结构
    - 可视化报告 (HTML)
    - 图表展示

  性能优化:
    - 并行检查
    - 结果缓存
    - 增量支持
```

---

## 对底层约定的潜在影响

### 无需修改项
- `underlying-convention.md` 已覆盖核心规则
- 新增模式与现有约定兼容

### 可选增强建议（需人工确认）

1. **约定增强**：建议定义标准输出格式规范（JSON Schema）

2. **类型体系**：建议维护官方的 skill 类型分类标准

3. **生态协作**：建议定义 skill 间的协作协议

---

## 认知积累状态

| 类别 | 数量 | 说明 |
|-----|------|------|
| 元认知模式 | 3 | 历史驱动、拓展增强双轨制、四步流程 |
| 拓展类型映射 | 4 | 结构/语法/约定/工具映射 |
| 拓展类型体系 | 7 | 完整的生态类型 |
| 输出模式 | 4 | 分析/方案/增强/报告 |
| 增强维度 | 4 | 检测/逻辑/格式/性能 |

---

## Skill 生态图谱

```
                    skill-generator
                          |
            +-------------+-------------+
            |                           |
      skill-修复器              skill-优化器
            |                           |
            |               +-----------+-----------+
            |               |           |       |
      修复诊断结果    validator    formatter  compliance
                         ...         ...      ...
                       (拓展类型体系)
```

---

## 后续行动建议

### 短期（本次生成后）
- [ ] 人工审查本次生成的 skill-优化器
- [ ] 测试拓展方案生成功能
- [ ] 验证修复器增强方案质量

### 中期（多次生成后）
- [ ] 实现推荐的拓展类型 skill
- [ ] 建立 skill 质量评分体系
- [ ] 定义 skill 间协作标准

### 长期（持续迭代）
- [ ] 构建 skill 生态市场
- [ ] 实现自动化优化闭环
- [ ] 建立 skill 性能基准

---

## 与修复器的协同关系

| 能力 | 修复器 | 优化器 |
|-----|-------|-------|
| 检测问题 | ✅ | ✅ (基于历史) |
| 修复问题 | ✅ | ❌ (仅建议) |
| 分析模式 | ❌ | ✅ |
| 拓展生态 | ❌ | ✅ |
| 增强自身 | ❌ | ✅ |

**协同模式**：
1. 修复器发现并修复问题
2. 修复结果存入 history/
3. 优化器分析历史模式
4. 优化器生成拓展方案
5. 优化器生成增强方案
6. 应用新方案到修复器
7. 形成持续改进闭环
